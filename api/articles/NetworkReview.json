{"title":"学习笔记 - 计算机网络","uid":"c241d614c6965b00ab46082015324893","slug":"NetworkReview","date":"2022-04-14T13:38:28.000Z","updated":"2022-04-14T15:06:31.665Z","comments":true,"path":"api/articles/NetworkReview.json","keywords":null,"cover":"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fpotato-xupt.github.io%2Fposts%2F13182%2FTIM%25E6%2588%25AA%25E5%259B%25BE20191023201644.png&refer=http%3A%2F%2Fpotato-xupt.github.io&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=auto?sec=1652535694&t=bf6a7d1a012ea3ea2de492c887b52cbe","content":"<h1 id=\"协议\"><a href=\"#协议\" class=\"headerlink\" title=\"协议\"></a>协议</h1><h2 id=\"1-TCP网络的分层\"><a href=\"#1-TCP网络的分层\" class=\"headerlink\" title=\"1. TCP网络的分层\"></a>1. TCP网络的分层</h2><p>TCP网络分层分为<strong>应用层</strong>、<strong>传输层</strong>、<strong>网络互联层</strong>、<strong>网络访问层</strong>和<strong>物理层</strong>五层。以<code>HTTP</code>为例，从客户端到服务端之间的通信，需要经过以下步骤：</p>\n<h3 id=\"Client的通信\"><a href=\"#Client的通信\" class=\"headerlink\" title=\"Client的通信\"></a>Client的通信</h3><ol>\n<li>(应用层)根据HTTP协议组装数据包</li>\n<li>(传输层)将端口号、序列号等组装进TCP头部，增加到数据包内</li>\n<li>(网络互联层)将源IP地址等信息组装进IP头部，增加到数据包内</li>\n<li>(网络访问层)将MAC地址等信息组装进以太网头部，增加到数据包内</li>\n<li>(物理层)通过物理层发送数据包</li>\n</ol>\n<h3 id=\"Server的通信\"><a href=\"#Server的通信\" class=\"headerlink\" title=\"Server的通信\"></a>Server的通信</h3><ol>\n<li>(物理层)从物理层接受数据包</li>\n<li>(网络访问层)取出以太网中的以太网头部，根据MAC地址判断包是不是发给自己的</li>\n<li>(网络互联层)取出IP包进行IP报文解析，确定传送数据包与路由</li>\n<li>(传输层)取出TCP包进行TCP报文解析</li>\n<li>(应用层)取出HTTP包，并作出HTTP报文解析</li>\n</ol>\n<h3 id=\"设计优势\"><a href=\"#设计优势\" class=\"headerlink\" title=\"设计优势\"></a>设计优势</h3><p>TCP网络分层的优势如下：</p>\n<ul>\n<li><strong>各层独立</strong> 限制了依赖关系的范围，各层之间使用标准化的接口，各层不需要知道上下层实现原地，增加或者修改一个应用协议不会影响其他层级</li>\n<li><strong>灵活性高</strong> 依赖某一层级的软件或者硬件，只需要处理好本层级的逻辑即可，不需要加载其他层级</li>\n<li><strong>易于测试和维护</strong> 提高了可测试性，可以对某一层独立测试，也可以进行整体替换</li>\n</ul>\n<h2 id=\"2-TCP的三次握手\"><a href=\"#2-TCP的三次握手\" class=\"headerlink\" title=\"2. TCP的三次握手\"></a>2. TCP的三次握手</h2><p>TCP的三次握手用于建立TCP连接</p>\n<h3 id=\"流程\"><a href=\"#流程\" class=\"headerlink\" title=\"流程\"></a>流程</h3><p>TCP的<code>Client</code>和<code>Server</code>之间的三次握手流程如下：</p>\n<ol>\n<li>Client发送连接请求，<code>SYN seq = x</code></li>\n<li>Server响应请求，<code>SYN seq = y, ACK = x + 1</code></li>\n<li>Client确认Server的响应请求，<code>ACK = y + 1</code></li>\n</ol>\n<h3 id=\"必要性\"><a href=\"#必要性\" class=\"headerlink\" title=\"必要性\"></a>必要性</h3><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>TCP协议是传输层协议，其本质是面向连接的协议</p></blockquote>\n<ol>\n<li>若TCP是两次握手的话，则Server无法确认Client的连接能力，造成Server端的连接资源浪费</li>\n<li>因为确认双方通信能力只需要三次连接，若TCP是四次握手的话，则会造成双方的连接资源浪费</li>\n</ol>\n<h2 id=\"3-TCP的四次挥手\"><a href=\"#3-TCP的四次挥手\" class=\"headerlink\" title=\"3. TCP的四次挥手\"></a>3. TCP的四次挥手</h2><p>TCP的四次挥手用于断开TCP连接</p>\n<h3 id=\"流程-1\"><a href=\"#流程-1\" class=\"headerlink\" title=\"流程\"></a>流程</h3><p>TCP的<code>Client</code>和<code>Server</code>之间的四次挥手流程如下：</p>\n<ol>\n<li>Client发送终止连接请求，<code>FIN seq = x+2, ACK = y+1</code></li>\n<li>Server响应终止连接请求，<code>ACK = x+3</code></li>\n<li>Server发送连接终止响应，<code>FIN seq = y+1</code></li>\n<li>Client确认连接终止，<code>ACK = y+2</code></li>\n</ol>\n<hr>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>最近在投简历，才意识到要投实习了，先回去睡觉了，晚些再更</p></blockquote>\n","text":"协议1. TCP网络的分层TCP网络分层分为应用层、传输层、网络互联层、网络访问层和物理层五层。以HTTP为例，从客户端到服务端之间的通信，需要经过以下步骤： Client的通信 (应用层)根据HTTP协议组装数据包 (传输层)将端口号、序列号等组装进TCP头部，增加到数据包内 ...","link":"","photos":[],"count_time":{"symbolsCount":"1k","symbolsTime":"1 mins."},"categories":[{"name":"blog","slug":"blog","count":11,"path":"api/categories/blog.json"}],"tags":[{"name":"Algorithm","slug":"Algorithm","count":5,"path":"api/tags/Algorithm.json"},{"name":"Backend","slug":"Backend","count":6,"path":"api/tags/Backend.json"},{"name":"Network","slug":"Network","count":1,"path":"api/tags/Network.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%8D%8F%E8%AE%AE\"><span class=\"toc-text\">协议</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-TCP%E7%BD%91%E7%BB%9C%E7%9A%84%E5%88%86%E5%B1%82\"><span class=\"toc-text\">1. TCP网络的分层</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Client%E7%9A%84%E9%80%9A%E4%BF%A1\"><span class=\"toc-text\">Client的通信</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Server%E7%9A%84%E9%80%9A%E4%BF%A1\"><span class=\"toc-text\">Server的通信</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%AE%BE%E8%AE%A1%E4%BC%98%E5%8A%BF\"><span class=\"toc-text\">设计优势</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-TCP%E7%9A%84%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B\"><span class=\"toc-text\">2. TCP的三次握手</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%B5%81%E7%A8%8B\"><span class=\"toc-text\">流程</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%BF%85%E8%A6%81%E6%80%A7\"><span class=\"toc-text\">必要性</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3-TCP%E7%9A%84%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B\"><span class=\"toc-text\">3. TCP的四次挥手</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%B5%81%E7%A8%8B-1\"><span class=\"toc-text\">流程</span></a></li></ol></li></ol></li></ol>","author":{"name":"𝚂𝚞𝚗𝚒𝚜𝚝𝙲","slug":"blog-author","avatar":"/assets/img/favicon.png","link":"/","description":"𝚂𝚞𝚗𝚒𝚜𝚝𝙲 is a pigeon from SouthWest University","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/assets/svg/bilibili.svg","link":"https://space.bilibili.com/25394898"},"live":{"icon":"/assets/svg/live.svg","link":"https://live.bilibili.com/5184681"},"github":{"icon":"/assets/svg/github.svg","link":"https://github.com/sunist-c"},"institution":{"icon":"/assets/svg/institution.svg","link":"https://github.com/swu-acm-lab"},"outlook":{"icon":"/assets/svg/outlook.svg","link":"mailto:sunist@mail.swu-acm.cn"}}}},"mapped":true,"prev_post":{"title":"ProjectAnalysis - 设计文档","uid":"a3fb736aa42338fc8e8d5d10993cc4eb","slug":"ProjectAnalysisDesignDocument","date":"2022-06-26T16:00:00.000Z","updated":"2022-06-27T07:48:52.849Z","comments":true,"path":"api/articles/ProjectAnalysisDesignDocument.json","keywords":null,"cover":"https://s3.bmp.ovh/imgs/2022/06/27/8296f0d2497c9a00.png","text":" 本blog是 SunistC 在学年设计期间，为了卷一个项目和小组同学一起拿高分，计划开发的基于大数据的分布式微服务系统，用于可视化展示全球的疫情状况，本文是设计阶段的记录，本文所对应的仓库为 ProjectAnalysis ，采用 MIT 协议 1. 架构1.1 Overvi...","link":"","photos":[],"count_time":{"symbolsCount":"2.4k","symbolsTime":"2 mins."},"categories":[{"name":"blog","slug":"blog","count":11,"path":"api/categories/blog.json"}],"tags":[{"name":"Backend","slug":"Backend","count":6,"path":"api/tags/Backend.json"},{"name":"Golang","slug":"Golang","count":9,"path":"api/tags/Golang.json"},{"name":"Big Data","slug":"Big-Data","count":1,"path":"api/tags/Big-Data.json"},{"name":"Java","slug":"Java","count":1,"path":"api/tags/Java.json"}],"author":{"name":"𝚂𝚞𝚗𝚒𝚜𝚝𝙲","slug":"blog-author","avatar":"/assets/img/favicon.png","link":"/","description":"𝚂𝚞𝚗𝚒𝚜𝚝𝙲 is a pigeon from SouthWest University","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/assets/svg/bilibili.svg","link":"https://space.bilibili.com/25394898"},"live":{"icon":"/assets/svg/live.svg","link":"https://live.bilibili.com/5184681"},"github":{"icon":"/assets/svg/github.svg","link":"https://github.com/sunist-c"},"institution":{"icon":"/assets/svg/institution.svg","link":"https://github.com/swu-acm-lab"},"outlook":{"icon":"/assets/svg/outlook.svg","link":"mailto:sunist@mail.swu-acm.cn"}}}}},"next_post":{"title":"CeobeBot后端 - 设计","uid":"aaa86bd7061c6b37fa4d0d3fb50508ac","slug":"CeobeBot-Backend","date":"2022-04-06T15:41:49.000Z","updated":"2022-04-07T10:04:43.842Z","comments":true,"path":"api/articles/CeobeBot-Backend.json","keywords":null,"cover":"https://camo.githubusercontent.com/6118a165f861b8337353b7ae7af62e976435029e0db70f243f34c5bcedc719f3/68747470733a2f2f7a332e617831782e636f6d2f323032312f31302f31342f3551316d336e2e706e67","text":" 先占个坑 ","link":"","photos":[],"count_time":{"symbolsCount":14,"symbolsTime":"1 mins."},"categories":[{"name":"blog","slug":"blog","count":11,"path":"api/categories/blog.json"}],"tags":[{"name":"Backend","slug":"Backend","count":6,"path":"api/tags/Backend.json"},{"name":"Golang","slug":"Golang","count":9,"path":"api/tags/Golang.json"},{"name":"CeobeBot","slug":"CeobeBot","count":2,"path":"api/tags/CeobeBot.json"}],"author":{"name":"𝚂𝚞𝚗𝚒𝚜𝚝𝙲","slug":"blog-author","avatar":"/assets/img/favicon.png","link":"/","description":"𝚂𝚞𝚗𝚒𝚜𝚝𝙲 is a pigeon from SouthWest University","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{"bilibili":{"icon":"/assets/svg/bilibili.svg","link":"https://space.bilibili.com/25394898"},"live":{"icon":"/assets/svg/live.svg","link":"https://live.bilibili.com/5184681"},"github":{"icon":"/assets/svg/github.svg","link":"https://github.com/sunist-c"},"institution":{"icon":"/assets/svg/institution.svg","link":"https://github.com/swu-acm-lab"},"outlook":{"icon":"/assets/svg/outlook.svg","link":"mailto:sunist@mail.swu-acm.cn"}}}}}}